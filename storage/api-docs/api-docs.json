{
    "openapi": "3.0.0",
    "info": {
        "title": "Titre de votre API",
        "description": "Description de votre API",
        "contact": {
            "email": "support@votreapi.com"
        },
        "license": {
            "name": "Licence de votre API",
            "url": "URL de la licence"
        },
        "version": "1.0.0"
    },
    "paths": {
        "/api/v1/articles": {
            "get": {
                "tags": [
                    "Articles"
                ],
                "summary": "Obtenir la liste des articles",
                "description": "Retourne la liste des articles avec des filtres optionnels.",
                "operationId": "2bb6d18420d6929d1d4175ace6521d21",
                "parameters": [
                    {
                        "name": "include",
                        "in": "query",
                        "description": "Inclure des relations",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "disponible",
                        "in": "query",
                        "description": "Filtrer les articles par disponibilité (oui/non)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des articles retournée avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "ArticleResource"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        },
        "/api/v1articles": {
            "post": {
                "tags": [
                    "Articles"
                ],
                "summary": "Créer un nouvel article",
                "description": "Ajoute un nouvel article à la base de données.",
                "operationId": "de780de04405bfc1ffb83cce99f65493",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "StoreArticleRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Article créé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "ArticleResource"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requête invalide"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        },
        "/api/v1/articles/{id}": {
            "get": {
                "tags": [
                    "Articles"
                ],
                "summary": "Afficher un article par ID",
                "description": "Retourne un article spécifique par son ID.",
                "operationId": "bf9724a6309b55de3ed51502e1a15814",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Article retourné avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "ArticleResource"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Article non trouvé"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Articles"
                ],
                "summary": "Mettre à jour un article",
                "description": "Met à jour un article existant.",
                "operationId": "3567f8e5d2eb2e799f139c75513d7283",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "UpdateArticleRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Article mis à jour avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "ArticleResource"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requête invalide"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Articles"
                ],
                "summary": "Supprimer un article",
                "description": "Supprime un article en utilisant la suppression douce (soft delete).",
                "operationId": "51d3b08d51f0416b640aa7728b78bdb1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Article supprimé avec succès"
                    },
                    "404": {
                        "description": "Article non trouvé"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Articles"
                ],
                "summary": "Mettre à jour le stock d'un article par ID",
                "description": "Met à jour la quantité de stock d'un article spécifique.",
                "operationId": "cf2eb9ab0d0680af30a7e92555ba9efa",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "UpdateStockRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Stock mis à jour avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "ArticleResource"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Article non trouvé"
                    },
                    "400": {
                        "description": "Requête invalide"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        },
        "/api/v1/articles/stock": {
            "post": {
                "tags": [
                    "Articles"
                ],
                "summary": "Mettre à jour les stocks des articles",
                "description": "Met à jour les quantités de stock pour plusieurs articles.",
                "operationId": "bebeaf27d5be355373f405fd37832575",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "articles": {
                                        "type": "array",
                                        "items": {
                                            "$ref": "UpdateStockRequest"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Stocks mis à jour avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "updatedArticles": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "quantite": {
                                                        "type": "integer"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "notFoundArticles": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "quantite": {
                                                        "type": "integer"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requête invalide"
                    },
                    "401": {
                        "description": "Non autorisé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        },
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "Inscrire un nouvel utilisateur",
                "description": "Cette méthode permet d'inscrire un nouvel utilisateur avec les rôles appropriés.",
                "operationId": "48e49e48019e8b141753cb515a26100b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "RegistreRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Utilisateur enregistré avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "UserResource"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Utilisateur non authentifié"
                    },
                    "403": {
                        "description": "Accès interdit, seul le rôle 'BOUTIQUIER' est autorisé"
                    },
                    "500": {
                        "description": "Erreur interne du serveur"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Login"
                ],
                "summary": "User Login",
                "description": "Connexion de l'utilisateur...",
                "operationId": "Login",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "login",
                                    "password"
                                ],
                                "properties": {
                                    "login": {
                                        "type": "string",
                                        "example": "khalilThree"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "Passer@123"
                                    }
                                },
                                "type": "object"
                            }
                        },
                        "application/json": {
                            "schema": {
                                "required": [
                                    "login",
                                    "password"
                                ],
                                "properties": {
                                    "login": {
                                        "type": "string",
                                        "example": "khalilThree"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "Passer@123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion réussie",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request"
                    },
                    "404": {
                        "description": "Resource Not Found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": [
                    "Authentification"
                ],
                "summary": "Déconnexion de l'utilisateur",
                "description": "Cette méthode permet de déconnecter l'utilisateur et de supprimer tous les tokens associés.",
                "operationId": "8f1a443d39c3bf383f851fbb51253c64",
                "responses": {
                    "200": {
                        "description": "Déconnexion réussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Déconnexion réussie. Vous devez vous reconnecter pour accéder à l'application."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Utilisateur non authentifié"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        },
        "/api/v1/clients": {
            "get": {
                "tags": [
                    "Clients"
                ],
                "summary": "Liste des clients",
                "description": "Récupère la liste des clients, avec possibilité de filtrer par la présence d'un compte utilisateur et par l'état d'activation du compte.",
                "operationId": "b302d909c0e1166a2c033bfd17ed030f",
                "parameters": [
                    {
                        "name": "comptes",
                        "in": "query",
                        "description": "Filtrer par présence d'un compte utilisateur (oui/non)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "oui",
                                "non"
                            ]
                        }
                    },
                    {
                        "name": "active",
                        "in": "query",
                        "description": "Filtrer par état d'activation du compte (oui/non)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "oui",
                                "non"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des clients récupérée avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "description": "Accès refusé"
                    }
                }
            },
            "post": {
                "tags": [
                    "Clients"
                ],
                "summary": "Créer un client",
                "description": "Crée un nouveau client avec la possibilité d'associer un compte utilisateur.",
                "operationId": "72a51329a9c85d73e15e640b5b53e470",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Client créé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur lors de la création du client"
                    }
                }
            }
        },
        "/api/v1/clients/{id}": {
            "get": {
                "tags": [
                    "Clients"
                ],
                "summary": "Afficher un client",
                "description": "Récupère les informations d'un client par son ID.",
                "operationId": "0a628c8462ccec3d2798255b1015c22c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du client",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Informations du client récupérées avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "404": {
                        "description": "Client non trouvé"
                    },
                    "403": {
                        "description": "Accès refusé"
                    }
                }
            }
        },
        "/api/v1/clients/telephone/{telephone}": {
            "post": {
                "tags": [
                    "Clients"
                ],
                "summary": "Afficher un client par téléphone",
                "description": "Récupère les informations d'un client en fonction de son numéro de téléphone.",
                "operationId": "27e73f00813ba2b42f09781d21a5b064",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Informations du client récupérées avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "404": {
                        "description": "Client non trouvé"
                    },
                    "403": {
                        "description": "Accès refusé"
                    }
                }
            }
        },
        "/api/v1/clients/{id}/add-user": {
            "patch": {
                "tags": [
                    "Clients"
                ],
                "summary": "Ajouter un compte utilisateur à un client",
                "description": "Associe un compte utilisateur à un client existant.",
                "operationId": "05cefcf3cfa744a5d6728ee7b57cf072",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du client",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {}
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Compte utilisateur ajouté avec succès au client",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Le client a déjà un compte utilisateur"
                    },
                    "500": {
                        "description": "Erreur lors de l'ajout du compte utilisateur"
                    }
                }
            }
        },
        "/api/v1/clients/{id}/dettes": {
            "get": {
                "tags": [
                    "Clients"
                ],
                "summary": "Lister les dettes d'un client",
                "description": "Récupère la liste des dettes d'un client par son ID.",
                "operationId": "90abd66c04915e543c348482c82c4422",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du client",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des dettes récupérée avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "404": {
                        "description": "Client non trouvé"
                    },
                    "403": {
                        "description": "Accès refusé"
                    }
                }
            }
        },
        "/api/v1/clients/{id}/withUser": {
            "get": {
                "tags": [
                    "Clients"
                ],
                "summary": "Afficher un client avec son compte utilisateur",
                "description": "Récupère les informations d'un client et les détails de son compte utilisateur associé.",
                "operationId": "b50e4d824cca2c7fc3c53655b6e89aad",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID du client",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Informations du client récupérées avec succès",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "ClientResource"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Client non trouvé"
                    },
                    "403": {
                        "description": "Accès refusé"
                    }
                }
            }
        },
        "/api/v1/users": {
            "get": {
                "tags": [
                    "AllUsersWithOptionalFilters"
                ],
                "summary": "Get all users with optional filters",
                "description": "Récupération des utilisateurs avec possibilité de filtrer par role et/ou par active",
                "operationId": "GetAllUsersWithOptionalFilters",
                "parameters": [
                    {
                        "name": "role",
                        "in": "query",
                        "description": "Filterer les utilisateurs par role (admin ou boutiquier)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "admin",
                                "boutiquier"
                            ]
                        }
                    },
                    {
                        "name": "active",
                        "in": "query",
                        "description": "Filterer les utilisateurs par status (oui ou non)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "oui",
                                "non"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Compte utilisateur créé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request"
                    },
                    "404": {
                        "description": "Resource Not Found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Utilisateurs"
                ],
                "summary": "Créer un nouvel utilisateur",
                "description": "Crée un nouvel utilisateur avec les données fournies dans la requête.",
                "operationId": "ba548b97148bb5c0d8cab3bc3f128bfd",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "StoreUserRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Utilisateur créé avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "description": "Accès interdit"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        },
        "/api/v1/users/{id}": {
            "get": {
                "tags": [
                    "Utilisateurs"
                ],
                "summary": "Afficher un utilisateur spécifique",
                "description": "Récupère les informations d'un utilisateur spécifique par son ID.",
                "operationId": "daaf7a6169ee9348c3fddb07778598ff",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de l'utilisateur",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Utilisateur récupéré avec succès",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "403": {
                        "description": "Accès interdit"
                    },
                    "404": {
                        "description": "Utilisateur non trouvé"
                    }
                },
                "security": [
                    {
                        "Bearer": []
                    }
                ]
            }
        }
    },
    "tags": [
        {
            "name": "Articles",
            "description": "Articles"
        },
        {
            "name": "Authentification",
            "description": "Authentification"
        },
        {
            "name": "Login",
            "description": "Login"
        },
        {
            "name": "Clients",
            "description": "Clients"
        },
        {
            "name": "AllUsersWithOptionalFilters",
            "description": "AllUsersWithOptionalFilters"
        },
        {
            "name": "Utilisateurs",
            "description": "Utilisateurs"
        }
    ],
    "components": {
        "securitySchemes": {
            "BearerToken": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "En-tête d'autorisation JWT utilisant le schéma Bearer."
            }
        }
    },
    "security": [
        {
            "BearerToken": []
        }
    ]
}